<!DOCTYPE html>
<html>
	<head>
		<title>three.js css3d - guides</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="style.css" type="text/css" media="screen" />
	</head>
	<body>
		<script src="lib/three.js"></script>



		<script>
			var camera, scene, renderer;
			var controls;
			var root;

			var objects = [];

			var GUIDES = {
				"Frontiere" : "frontiere",
        "Halo" : "halo"
			};

			var container = document.createElement('div');
			document.body.appendChild(container);
			//var menu = document.createElement( "div" );

			init();
			animate();

			function init() {
				//




				//

				camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 5000 );
				camera.position.z = 1500;

				scene = new THREE.Scene();

				root = new THREE.Object3D();
				scene.add( root );

				controls = new THREE.TrackballControls( camera, renderer.domElement );
				controls.rotateSpeed = 0.5;
				controls.addEventListener( 'change', render );


				renderer = new THREE.WEBGLRenderer({antialias: true});
				renderer.setClearColor(0xf0f0f0);
				renderer.setPixelRatio(window.devicePixelRatio);
				renderer.setSize(window.innerWidth, window.innerHeight);
				renderer.sortObjects = false;

				renderer.shadowMap.enabled = true;
				renderer.shadowMap.type = THREE.PCFShadowMap;

				container.appendChild(renderer.domElement);
				
								var geometry = new THREE.BoxGeometry( 40, 40, 40 );

								//for(var i = 0; i < 200; i ++){
								//crÃ©ation du carton
								var object = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial( { color: 0x3A3C3C } ) );

								object.position.x = document.documentElement.clientWidth/4;
								object.position.y = document.documentElement.clientHeight/4;
								object.position.z = 0;

								object.rotation.x = 0;
								object.rotation.y = 0;
								object.rotation.z = 0;

								object.scale.x = 5;
								object.scale.y = 4;
								object.scale.z = 0.2;

								object.castShadow = true;
								object.receiveShadow = true;

								scene.add( object );

								objects.push( object );

				//createMenu();


				//

				window.addEventListener( 'resize', onWindowResize, false );

			}

			//

			function generateButtonCallback( osc ) {


			};

			function createMenu() {

				for ( var g in GUIDES ) {

					var button = document.createElement( 'button' );
					button.innerHTML = g;
					menu.appendChild( button );

					var osc = "guides/" +  GUIDES[ g ];

					button.addEventListener( 'click', generateButtonCallback( osc ), false );

				}


			};

			//

			//

			function colorify( ctx, width, height, color, a ) {

				var r = color.r;
				var g = color.g;
				var b = color.b;

				var imageData = ctx.getImageData( 0, 0, width, height );
				var data = imageData.data;

				for ( var y = 0; y < height; y ++ ) {

					for ( var x = 0; x < width; x ++ ) {

						var index = ( y * width + x ) * 4;

						data[ index ]     *= r;
						data[ index + 1 ] *= g;
						data[ index + 2 ] *= b;
						data[ index + 3 ] *= a;

					}

				}

				ctx.putImageData( imageData, 0, 0 );

			};

			function imageToCanvas( image ) {

				var width = image.width;
				var height = image.height;

				var canvas = document.createElement( 'canvas' );

				canvas.width = width;
				canvas.height = height;

				var context = canvas.getContext( '2d' );
				context.drawImage( image, 0, 0, width, height );

				return canvas;

			};

			//

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

				render();

			};

			function animate() {

				requestAnimationFrame( animate );
				controls.update();
				render();

			};

			function render() {

				renderer.render( scene, camera );

			};

    </script>
  </body>

</html>
